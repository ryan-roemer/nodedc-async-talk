<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=1024" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <title>async.js | by Ryan Roemer @ryan_roemer</title>

    <meta name="description" content="Node.DC lightning talk (Feb. 20, 2012) on async.js." />
    <meta name="author" content="Ryan Roemer" />

    <link href="http://fonts.googleapis.com/css?family=Open+Sans:regular,semibold,italic,italicsemibold|PT+Sans:400,700,400italic,700italic|PT+Serif:400,700,400italic,700italic" rel="stylesheet" />
    <link href="css/impress-demo.css" rel="stylesheet" />
    <link href="css/syntax/borland.css" rel="stylesheet" />
    <link rel="apple-touch-icon" href="apple-touch-icon.png" />
</head>
<body>
<div id="impress" class="impress-not-supported">
    <div class="fallback-message">
        <p>Your browser <b>doesn't support the features required</b> by
        impress.js, so you are presented with a simplified version of this
        presentation.</p>
        <p>For the best experience please use the latest <b>Chrome</b>,
        <b>Safari</b> or <b>Firefox</b> browser. Upcoming version 10 of
        Internet Explorer <i>should</i> also handle it.</p>
    </div>

    <div id="title" class="step" data-x="-500" data-y="-1250" data-scale="4">
        <h1>async.js</h1>
        <p class="byline">
            Ryan Roemer (<a href="https://twitter.com/#!/ryan_roemer">@ryan_roemer</a>)
        </p>
        <p class="byline">
            <a href="http://www.meetup.com/node-dc/events/49905452/">Node.DC</a>
             - Feb. 20, 2012
        </p>
    </div>

    <div class="step" data-x="0" data-y="500" data-rotate="90">
        <q>Does this look familiar?</q>
    </div>

    <div class="step slide" data-x="-1000" data-y="500" data-rotate="90" data-scale="1">
        <div class='highlight'><pre><code class='javascript'><span class='kd'>var</span> <span class='nx'>fs</span> <span class='o'>=</span> <span class='nx'>require</span><span class='p'>(</span><span class='s1'>&#39;fs&#39;</span><span class='p'>),</span>
  <span class='nx'>path</span> <span class='o'>=</span> <span class='nx'>require</span><span class='p'>(</span><span class='s1'>&#39;path&#39;</span><span class='p'>),</span>
  <span class='nx'>file1</span> <span class='o'>=</span> <span class='s2'>&quot;file1.txt&quot;</span><span class='p'>,</span>
  <span class='nx'>file2</span> <span class='o'>=</span> <span class='s2'>&quot;file2.txt&quot;</span><span class='p'>;</span>

<span class='c1'>// Check if file1 exists, write to file2,</span>
<span class='c1'>// then display new file2 contents.</span>
<span class='nx'>path</span><span class='p'>.</span><span class='nx'>exists</span><span class='p'>(</span><span class='nx'>file1</span><span class='p'>,</span> <span class='kd'>function</span> <span class='p'>(</span><span class='nx'>exists</span><span class='p'>)</span> <span class='p'>{</span>
  <span class='k'>if</span> <span class='p'>(</span><span class='o'>!</span><span class='nx'>exists</span><span class='p'>)</span> <span class='k'>throw</span> <span class='k'>new</span> <span class='nb'>Error</span><span class='p'>(</span><span class='s2'>&quot;No file!&quot;</span><span class='p'>);</span>

  <span class='nx'>fs</span><span class='p'>.</span><span class='nx'>readFile</span><span class='p'>(</span><span class='nx'>file1</span><span class='p'>,</span> <span class='kd'>function</span> <span class='p'>(</span><span class='nx'>err</span><span class='p'>,</span> <span class='nx'>data</span><span class='p'>)</span> <span class='p'>{</span>
    <span class='k'>if</span> <span class='p'>(</span><span class='nx'>err</span><span class='p'>)</span> <span class='k'>throw</span> <span class='nx'>err</span><span class='p'>;</span>

    <span class='nx'>fs</span><span class='p'>.</span><span class='nx'>writeFile</span><span class='p'>(</span><span class='nx'>file2</span><span class='p'>,</span> <span class='nx'>data</span><span class='p'>,</span> <span class='kd'>function</span> <span class='p'>(</span><span class='nx'>err</span><span class='p'>)</span> <span class='p'>{</span>
      <span class='k'>if</span> <span class='p'>(</span><span class='nx'>err</span><span class='p'>)</span> <span class='k'>throw</span> <span class='nx'>err</span><span class='p'>;</span>

      <span class='nx'>fs</span><span class='p'>.</span><span class='nx'>readFile</span><span class='p'>(</span><span class='nx'>file2</span><span class='p'>,</span> <span class='kd'>function</span> <span class='p'>(</span><span class='nx'>err</span><span class='p'>,</span> <span class='nx'>data</span><span class='p'>)</span> <span class='p'>{</span>
        <span class='k'>if</span> <span class='p'>(</span><span class='nx'>err</span><span class='p'>)</span> <span class='k'>throw</span> <span class='nx'>err</span><span class='p'>;</span>
        <span class='nx'>console</span><span class='p'>.</span><span class='nx'>log</span><span class='p'>(</span><span class='nx'>data</span><span class='p'>.</span><span class='nx'>toString</span><span class='p'>());</span>
      <span class='p'>});</span>
    <span class='p'>});</span>
  <span class='p'>});</span>
<span class='p'>});</span>
</code></pre>
</div>
    </div>

    <div class="step slide" data-x="-1000" data-y="1750" data-rotate="90" data-scale="1">
<div class='highlight'><pre><code class='javascript'><span class='nx'>fun1</span><span class='p'>(</span><span class='nx'>params</span><span class='p'>,</span> <span class='kd'>function</span> <span class='p'>(</span><span class='nx'>err</span><span class='p'>,</span> <span class='nx'>results</span><span class='p'>)</span> <span class='p'>{</span>
  <span class='nx'>fun2</span><span class='p'>(</span><span class='nx'>params</span><span class='p'>,</span> <span class='kd'>function</span> <span class='p'>(</span><span class='nx'>err</span><span class='p'>,</span> <span class='nx'>results</span><span class='p'>)</span> <span class='p'>{</span>
    <span class='nx'>fun3</span><span class='p'>(</span><span class='nx'>params</span><span class='p'>,</span> <span class='kd'>function</span> <span class='p'>(</span><span class='nx'>err</span><span class='p'>,</span> <span class='nx'>results</span><span class='p'>)</span> <span class='p'>{</span>
      <span class='nx'>fun4</span><span class='p'>(</span><span class='nx'>params</span><span class='p'>,</span> <span class='kd'>function</span> <span class='p'>(</span><span class='nx'>err</span><span class='p'>,</span> <span class='nx'>results</span><span class='p'>)</span> <span class='p'>{</span>
        <span class='nx'>fun5</span><span class='p'>(</span><span class='nx'>params</span><span class='p'>,</span> <span class='kd'>function</span> <span class='p'>(</span><span class='nx'>err</span><span class='p'>,</span> <span class='nx'>results</span><span class='p'>)</span> <span class='p'>{</span>
          <span class='nx'>fun6</span><span class='p'>(</span><span class='nx'>params</span><span class='p'>,</span> <span class='kd'>function</span> <span class='p'>(</span><span class='nx'>err</span><span class='p'>,</span> <span class='nx'>results</span><span class='p'>)</span> <span class='p'>{</span>
            <span class='nx'>fun7</span><span class='p'>(</span><span class='nx'>params</span><span class='p'>,</span> <span class='kd'>function</span> <span class='p'>(</span><span class='nx'>err</span><span class='p'>,</span> <span class='nx'>results</span><span class='p'>)</span> <span class='p'>{</span>
              <span class='nx'>fun8</span><span class='p'>(</span><span class='nx'>params</span><span class='p'>,</span> <span class='kd'>function</span> <span class='p'>(</span><span class='nx'>err</span><span class='p'>,</span> <span class='nx'>results</span><span class='p'>)</span> <span class='p'>{</span>
                <span class='nx'>fun9</span><span class='p'>(</span><span class='nx'>params</span><span class='p'>,</span> <span class='kd'>function</span> <span class='p'>(</span><span class='nx'>err</span><span class='p'>,</span> <span class='nx'>results</span><span class='p'>)</span> <span class='p'>{</span>
                  <span class='nx'>fun10</span><span class='p'>(</span><span class='nx'>params</span><span class='p'>,</span> <span class='kd'>function</span> <span class='p'>(</span><span class='nx'>err</span><span class='p'>,</span> <span class='nx'>results</span><span class='p'>)</span> <span class='p'>{</span>
                    <span class='c1'>// Do something interesting here.</span>
                  <span class='p'>});</span>
                <span class='p'>});</span>
              <span class='p'>});</span>
            <span class='p'>});</span>
          <span class='p'>});</span>
        <span class='p'>});</span>
      <span class='p'>});</span>
    <span class='p'>});</span>
  <span class='p'>});</span>
<span class='p'>});</span>
</code></pre>
</div>
    </div>

    <div id="topic" class="step" data-x="0" data-y="1750" data-rotate="90" data-scale="1">
        <h1>async.js</h1>
        <p>
            A control-flow library for <br />
            Node.js <i>and the browser</i>.
        </p><br />
        <p>
            <a href="https://github.com/caolan/async">https://github.com/caolan/async</a>
        </p>
    </div>

    <div class="step chart" data-x="0" data-y="3000" data-rotate="90" data-scale="1">
        <svg width="99px" height="430px" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs xmlns="http://www.w3.org/2000/svg"><linearGradient id="1" x1="0%" y1="0%" x2="0%" y2="100%"><stop offset="0%" style="stop-color:#666699"/><stop offset="100%" style="stop-color:#FFFFFF"/></linearGradient></defs><ellipse xmlns="http://www.w3.org/2000/svg" cx="47.5" cy="46.5" rx="47" ry="47" fill="url(#1)" stroke="#000000" stroke-width="1.1749999999999998"/><path xmlns="http://www.w3.org/2000/svg" d="M 46.94 160.25 L 43.26 152.72 L 46.99 154.63 L 50.76 152.78 Z" fill="#000000" stroke="#000000" stroke-width="3.525" stroke-miterlimit="10"/><path xmlns="http://www.w3.org/2000/svg" d="M 47.5 93.5 L 46.99 154.63" fill="none" stroke="#000000" stroke-width="3.525" stroke-miterlimit="10"/><ellipse xmlns="http://www.w3.org/2000/svg" cx="47.5" cy="211" rx="47" ry="47" fill="url(#1)" stroke="#000000" stroke-width="1.1749999999999998"/><path xmlns="http://www.w3.org/2000/svg" d="M 46.94 324.75 L 43.26 317.22 L 46.99 319.13 L 50.76 317.28 Z" fill="#000000" stroke="#000000" stroke-width="3.525" stroke-miterlimit="10"/><path xmlns="http://www.w3.org/2000/svg" d="M 47.5 258 L 46.99 319.13" fill="none" stroke="#000000" stroke-width="3.525" stroke-miterlimit="10"/><ellipse xmlns="http://www.w3.org/2000/svg" cx="47.5" cy="375.5" rx="47" ry="47" fill="url(#1)" stroke="#000000" stroke-width="1.1749999999999998"/></svg>
    </div>

    <div class="step" data-x="-1000" data-y="3000" data-rotate="0" data-scale="1">
        <h1>Control Flow</h1>
        <div class="cont">
        <ul>
            <li>series</li>
            <li>waterfall</li>
            <li>iterator</li>
        </ul>
        </div>
    </div>

    <div class="step slide" data-x="-1000" data-y="4000" data-rotate="0" data-scale="1">
        <div class="highlight"><pre><span class="kd">var</span> <span class="nx">readData</span><span class="p">;</span> <span class="c1">// Chained data object.</span>

<span class="c1">// Straight series.</span>
<span class="nx">async</span><span class="p">.</span><span class="nx">series</span><span class="p">([</span>
  <span class="kd">function</span> <span class="p">(</span><span class="nx">cb</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">path</span><span class="p">.</span><span class="nx">exists</span><span class="p">(</span><span class="nx">file1</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">exists</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">cb</span><span class="p">(</span><span class="nx">exists</span> <span class="o">?</span> <span class="kc">null</span> <span class="o">:</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s2">&quot;No file!&quot;</span><span class="p">));</span>
    <span class="p">});</span>
  <span class="p">},</span>
  <span class="kd">function</span> <span class="p">(</span><span class="nx">cb</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">fs</span><span class="p">.</span><span class="nx">readFile</span><span class="p">(</span><span class="nx">file1</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">readData</span> <span class="o">=</span> <span class="nx">data</span><span class="p">;</span>
      <span class="nx">cb</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
    <span class="p">});</span>
  <span class="p">},</span>
  <span class="kd">function</span> <span class="p">(</span><span class="nx">cb</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">fs</span><span class="p">.</span><span class="nx">writeFile</span><span class="p">(</span><span class="nx">file2</span><span class="p">,</span> <span class="nx">readData</span><span class="p">,</span> <span class="nx">cb</span><span class="p">);</span>
  <span class="p">},</span>
  <span class="kd">function</span> <span class="p">(</span><span class="nx">cb</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">fs</span><span class="p">.</span><span class="nx">readFile</span><span class="p">(</span><span class="nx">file2</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">err</span><span class="p">)</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
      <span class="nx">cb</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
    <span class="p">});</span>
  <span class="p">}</span>
<span class="p">],</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="k">throw</span> <span class="nx">err</span><span class="p">;</span>
<span class="p">});</span>
</pre></div>
    </div>

    <div class="step" data-x="250" data-y="4000" data-rotate="0" data-scale="1">
        <p><b>Pitfall</b>: Out-of-order execution <br />
        and chained objects.</p>
    </div>

    <div class="step slide" data-x="1500" data-y="4000" data-rotate="0" data-scale="1">
        <div class="highlight"><pre><span class="c1">// Now with waterfall...</span>
<span class="nx">async</span><span class="p">.</span><span class="nx">waterfall</span><span class="p">([</span>
  <span class="kd">function</span> <span class="p">(</span><span class="nx">cb</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">path</span><span class="p">.</span><span class="nx">exists</span><span class="p">(</span><span class="nx">file1</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">exists</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">cb</span><span class="p">(</span><span class="nx">exists</span> <span class="o">?</span> <span class="kc">null</span> <span class="o">:</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s2">&quot;No file!&quot;</span><span class="p">));</span>
    <span class="p">});</span>
  <span class="p">},</span>
  <span class="kd">function</span> <span class="p">(</span><span class="nx">cb</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">fs</span><span class="p">.</span><span class="nx">readFile</span><span class="p">(</span><span class="nx">file1</span><span class="p">,</span> <span class="nx">cb</span><span class="p">);</span> <span class="c1">// Pass cb directly.</span>
  <span class="p">},</span>
  <span class="kd">function</span> <span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="nx">cb</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// &quot;data&quot; now first arg.</span>
    <span class="nx">fs</span><span class="p">.</span><span class="nx">writeFile</span><span class="p">(</span><span class="nx">file2</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">cb</span><span class="p">);</span>
  <span class="p">},</span>
  <span class="kd">function</span> <span class="p">(</span><span class="nx">cb</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">fs</span><span class="p">.</span><span class="nx">readFile</span><span class="p">(</span><span class="nx">file2</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">err</span><span class="p">)</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
      <span class="nx">cb</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
    <span class="p">});</span>
  <span class="p">}</span>
<span class="p">],</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="k">throw</span> <span class="nx">err</span><span class="p">;</span>
<span class="p">});</span>
</pre></div>
    </div>

    <!--

        So to make a summary of all the possible attributes used to position presentation steps, we have:

        * `data-x`, `data-y`, `data-z` - they define the position of **the center** of step element on
            the canvas in pixels; their default value is 0;
        * `data-rotate-x`, `data-rotate-y`, 'data-rotate-z`, `data-rotate` - they define the rotation of
            the element around given axis in degrees; their default value is 0; `data-rotate` and `data-rotate-z`
            are exactly the same;
        * `data-scale` - defines the scale of step element; default value is 1

    -->
    <div id="overview" class="step" data-x="3000" data-y="1500" data-scale="10">
    </div>

</div>

<div class="hint">
    <p>Use a spacebar or arrow keys to navigate</p>
</div>
<script>
if ("ontouchstart" in document.documentElement) {
    document.querySelector(".hint").innerHTML = "<p>Tap on the left or right to navigate</p>";
}
</script>

<script src="js/impress.js"></script>
<script>impress();</script>

</body>
</html>
